<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lucky Spin</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.5/Babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center h-screen">
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    const LuckySpin = () => {
      const [reels, setReels] = useState(['üçé', 'üçé', 'üçé']); // Aktu√°ln√≠ symboly na v√°lc√≠ch
      const [balance, setBalance] = useState(1000); // Body hr√°ƒçe
      const [bet, setBet] = useState(10); // Aktu√°ln√≠ s√°zka
      const [spinning, setSpinning] = useState(false); // Stav toƒçen√≠
      const [lastWin, setLastWin] = useState(0); // Posledn√≠ v√Ωhra
      const [freeSpins, setFreeSpins] = useState(0); // Poƒçet toƒçen√≠ zdarma
      const [jackpotStreak, setJackpotStreak] = useState(0); // Poƒç√≠tadlo pro jackpot

      const symbols = ['üçé', 'üçã', 'üîî', '‚≠ê', '7']; // Mo≈æn√© symboly

      // Funkce pro v√Ωpoƒçet v√Ωhry
      const calculateWin = (result) => {
        if (result[0] === result[1] && result[1] === result[2]) {
          if (result[0] === '7') {
            setJackpotStreak((prev) => prev + 1);
            return 100 * bet; // 3√ó sedmiƒçka
          }
          if (result[0] === '‚≠ê') return 50 * bet; // 3√ó hvƒõzda
          if (result[0] === 'üîî') return 20 * bet; // 3√ó zvonek
          if (result[0] === 'üçé' || result[0] === 'üçã') return 10 * bet; // 3√ó ovoce
        } else if (result[0] === '7' && result[1] === '7') {
          return 5 * bet; // 2√ó sedmiƒçka
        }
        return 0;
      };

      // Funkce pro toƒçen√≠ v√°lc≈Ø
      const spin = () => {
        if (balance < bet || spinning) return;
        setSpinning(true);
        setBalance((prev) => prev - bet);

        // Simulace toƒçen√≠
        let spins = 0;
        const interval = setInterval(() => {
          setReels([
            symbols[Math.floor(Math.random() * symbols.length)],
            symbols[Math.floor(Math.random() * symbols.length)],
            symbols[Math.floor(Math.random() * symbols.length)],
          ]);
          spins++;
          if (spins > 10) {
            clearInterval(interval);
            const finalReels = [
              symbols[Math.floor(Math.random() * symbols.length)],
              symbols[Math.floor(Math.random() * symbols.length)],
              symbols[Math.floor(Math.random() * symbols.length)],
            ];
            setReels(finalReels);
            const win = calculateWin(finalReels);
            setLastWin(win);
            setBalance((prev) => prev + win);

            // Bonusov√© funkce
            if (finalReels[0] === '‚≠ê' && finalReels[1] === '‚≠ê' && finalReels[2] === '‚≠ê') {
              setFreeSpins((prev) => prev + 5);
            }
            if (Math.random() < 0.1) {
              setLastWin((prev) => prev * 2); // N√°hodn√Ω 2√ó multiplik√°tor
              setBalance((prev) => prev + win);
            }
            if (jackpotStreak >= 3) {
              setBalance((prev) => prev + 1000);
              setJackpotStreak(0);
            }

            setSpinning(false);
            if (freeSpins > 0) {
              setFreeSpins((prev) => prev - 1);
              setTimeout(spin, 1000); // Automatick√© toƒçen√≠ zdarma
            }
          }
        }, 100);
      };

      // Reset bod≈Ø
      const resetBalance = () => {
        setBalance(1000);
        setJackpotStreak(0);
        setFreeSpins(0);
      };

      return (
        <div className="flex flex-col items-center justify-center p-4 max-w-md mx-auto">
          <h1 className="text-3xl font-bold mb-4">Lucky Spin</h1>
          <div className="bg-gray-800 p-4 rounded-lg w-full">
            {/* V√°lce */}
            <div className="flex justify-between text-4xl mb-4">
              {reels.map((symbol, index) => (
                <div
                  key={index}
                  className={`w-16 h-16 flex items-center justify-center border-2 border-yellow-500 rounded ${
                    spinning ? 'animate-spin' : ''
                  }`}
                >
                  {symbol}
                </div>
              ))}
            </div>
            {/* Informace */}
            <div className="text-center mb-4">
              <p>Z≈Østatek: <span className="font-bold">{balance}</span> bod≈Ø</p>
              <p>S√°zka: <span className="font-bold">{bet}</span> bod≈Ø</p>
              <p>Posledn√≠ v√Ωhra: <span className="font-bold">{lastWin}</span> bod≈Ø</p>
              {freeSpins > 0 && <p>Tocen√≠ zdarma: <span className="font-bold">{freeSpins}</span></p>}
            </div>
            {/* Ovl√°d√°n√≠ s√°zky */}
            <div className="flex justify-center mb-4">
              <button
                onClick={() => setBet((prev) => Math.max(10, prev - 10))}
                className="bg-blue-500 text-white px-4 py-2 rounded mr-2"
              >
                ‚àí
              </button>
              <span className="text-xl">{bet}</span>
              <button
                onClick={() => setBet((prev) => Math.min(50, prev + 10))}
                className="bg-blue-500 text-white px-4 py-2 rounded ml-2"
              >
                +
              </button>
            </div>
            {/* Tlaƒç√≠tko toƒçen√≠ */}
            <button
              onClick={spin}
              disabled={spinning || balance < bet}
              className={`w-full py-3 rounded text-xl font-bold ${
                spinning || balance < bet
                  ? 'bg-gray-500 cursor-not-allowed'
                  : 'bg-green-500 hover:bg-green-600'
              }`}
            >
              {spinning ? 'Toƒç√≠ se...' : 'Toƒçit!'}
            </button>
            {/* Reset tlaƒç√≠tko */}
            {balance < bet && (
              <button
                onClick={resetBalance}
                className="w-full py-3 mt-2 bg-red-500 hover:bg-red-600 rounded text-xl font-bold"
              >
                Doplnit body
              </button>
            )}
          </div>
        </div>
      );
    };

    ReactDOM.render(<LuckySpin />, document.getElementById('root'));
  </script>
</body>
</html>
